<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Réunion en cours - KERNEL MEETING</title>
    <link rel="stylesheet" href="styles/main.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="meeting-body">
    <div class="meeting-container">
        <!-- Header de la réunion -->
        <header class="meeting-header">
            <div class="meeting-brand">
                <div class="meeting-logo">
                    <img src="./images/logo_sans-fond.png" alt="Kernel Meeting Logo">
                </div>
                <div class="meeting-info">
                    <span class="meeting-title">KERNEL MEETING</span>
                    <span class="meeting-subtitle">PROFESSIONAL MEETING</span>
                </div>
            </div>
            <div class="meeting-status-section">
                <button class="status-btn connected">
                    <i class="fas fa-circle"></i>
                    Connected
                </button>
            </div>
        </header>

        <div class="meeting-layout">
            <!-- Zone vidéo principale -->
            <div class="video-area">
                <div class="main-video">
                    <video id="mainVideo" autoplay muted></video>
                    <div class="video-controls-overlay">
                        <button class="video-control-btn orange">
                            <i class="fas fa-video"></i>
                        </button>
                    </div>
                    <div class="speaker-info">
                        <h3 class="speaker-name">Alex Johnson</h3>
                        <span class="speaker-status">SPEAKING</span>
                    </div>
                </div>

                <!-- Participants en bas -->
                <div class="participants-strip">
                    <div class="participant-video active">
                        <video autoplay muted></video>
                        <div class="participant-info">
                            <div class="participant-status online"></div>
                            <span class="participant-name">Vous</span>
                        </div>
                    </div>
                    
                    <div class="participant-video">
                        <video autoplay></video>
                        <div class="participant-info">
                            <div class="participant-status online"></div>
                            <span class="participant-name">Alice</span>
                        </div>
                    </div>
                    
                    <div class="participant-video">
                        <video autoplay></video>
                        <div class="participant-info">
                            <div class="participant-status online"></div>
                            <span class="participant-name">Bob</span>
                        </div>
                    </div>
                    
                    <div class="participant-video">
                        <video autoplay></video>
                        <div class="participant-info">
                            <div class="participant-status online"></div>
                            <span class="participant-name">Charlie</span>
                        </div>
                    </div>
                    
                    <div class="participant-video">
                        <video autoplay></video>
                        <div class="participant-info">
                            <div class="participant-status online"></div>
                            <span class="participant-name">Diana</span>
                        </div>
                    </div>
                </div>

                <!-- Contrôles de la réunion -->
                <div class="meeting-controls">
                    <button class="control-btn orange" id="muteBtn" onclick="toggleMute()">
                        <i class="fas fa-microphone"></i>
                    </button>
                    <button class="control-btn orange" id="videoBtn" onclick="toggleVideo()">
                        <i class="fas fa-video"></i>
                    </button>
                    <button class="control-btn green" onclick="toggleScreenShare()">
                        <i class="fas fa-desktop"></i>
                    </button>
                    <button class="control-btn green" onclick="toggleRecording()">
                        <i class="fas fa-record-vinyl"></i>
                    </button>
                    <button class="control-btn red" onclick="leaveMeeting()">
                        <i class="fas fa-phone-slash"></i>
                    </button>
                </div>

                <!-- Footer de la réunion -->
                <div class="meeting-footer">
                    <div class="connection-quality">
                        <i class="fas fa-signal"></i>
                        <span>Connection Quality</span>
                        <div class="quality-bars">
                            <div class="bar active"></div>
                            <div class="bar active"></div>
                            <div class="bar active"></div>
                            <div class="bar active"></div>
                            <div class="bar"></div>
                        </div>
                    </div>
                    <div class="participants-count">
                        <i class="fas fa-users"></i>
                        <span>6 Participants</span>
                    </div>
                    <div class="meeting-timer">
                        <i class="fas fa-clock"></i>
                        <span id="timer">00:18:33</span>
                    </div>
                </div>
            </div>

            <!-- Panel de chat -->
            <div class="chat-panel" id="chatPanel">
                <div class="chat-header">
                    <h3>Chat</h3>
                    <button class="chat-toggle" onclick="toggleChat()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="chat-messages" id="chatMessages">
                    <div class="message">
                        <div class="message-avatar">
                            <div class="avatar online">A</div>
                        </div>
                        <div class="message-content">
                            <div class="message-header">
                                <span class="message-author">Alice</span>
                                <span class="message-time">14:32</span>
                            </div>
                            <div class="message-text">Bonjour tout le monde !</div>
                        </div>
                    </div>
                    
                    <div class="message">
                        <div class="message-avatar">
                            <div class="avatar online">B</div>
                        </div>
                        <div class="message-content">
                            <div class="message-header">
                                <span class="message-author">Bob</span>
                                <span class="message-time">14:33</span>
                            </div>
                            <div class="message-text">Salut ! Prêt pour la présentation</div>
                        </div>
                    </div>
                    
                    <div class="message">
                        <div class="message-avatar">
                            <div class="avatar online">C</div>
                        </div>
                        <div class="message-content">
                            <div class="message-header">
                                <span class="message-author">Charlie</span>
                                <span class="message-time">14:34</span>
                            </div>
                            <div class="message-text">Parfait, on peut commencer</div>
                        </div>
                    </div>
                    
                    <div class="message">
                        <div class="message-avatar">
                            <div class="avatar online">D</div>
                        </div>
                        <div class="message-content">
                            <div class="message-header">
                                <span class="message-author">Diana</span>
                                <span class="message-time">14:35</span>
                            </div>
                            <div class="message-text">J'ai les documents prêts</div>
                        </div>
                    </div>
                </div>
                
                <div class="chat-input">
                    <input type="text" id="messageInput" placeholder="Tapez un message..." onkeypress="handleMessageInput(event)">
                    <button onclick="sendMessage()">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Bouton pour ouvrir le chat (quand fermé) -->
        <button class="chat-toggle-btn" id="chatToggleBtn" onclick="toggleChat()" style="display: none;">
            <i class="fas fa-comments"></i>
            <span class="notification-badge" id="chatBadge">3</span>
        </button>
    </div>

    <!-- Modal de création de réunion (depuis l'interface de réunion) -->
    <div id="createMeetingModal" class="modal">
        <div class="modal-content large">
            <div class="modal-header-new">
                <div class="modal-logo">
                    <img src="./images/logo_sans-fond.png" alt="Kernel Meeting Logo">
                </div>
                <h2>Créer une nouvelle réunion</h2>
                <p class="modal-subtitle-new">Configurez votre réunion avec tous les paramètres souhaités</p>
            </div>
            
            <div class="modal-body">
                <form id="createMeetingForm" class="meeting-form">
                    <div class="form-group">
                        <label for="meetingTitle">Titre de la réunion</label>
                        <input type="text" id="meetingTitle" class="input-field" placeholder="Ex: Réunion équipe marketing">
                    </div>
                    
                    <div class="form-group">
                        <label for="meetingDescription">Description</label>
                        <textarea id="meetingDescription" class="input-field" rows="3" placeholder="Décrivez brièvement l'objet de la réunion..."></textarea>
                    </div>
                    
                    <div class="form-section">
                        <h4>Aperçu de la réunion</h4>
                        <div class="meeting-preview">
                            <div class="preview-item">
                                <span class="preview-label">Réunion d'équipe</span>
                                <span class="preview-value">Équipe Marketing</span>
                            </div>
                            <div class="preview-item">
                                <span class="preview-label">Présentation client</span>
                                <span class="preview-value">Présentation Q4</span>
                            </div>
                            <div class="preview-item">
                                <span class="preview-label">Planification projet</span>
                                <span class="preview-value">Roadmap 2024</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="meetingDate">Date</label>
                            <input type="date" id="meetingDate" class="input-field">
                        </div>
                        
                        <div class="form-group">
                            <label for="meetingTime">Heure</label>
                            <input type="time" id="meetingTime" class="input-field">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="meetingDuration">Durée estimée</label>
                            <select id="meetingDuration" class="input-field">
                                <option value="30">30 minutes</option>
                                <option value="60" selected>1 heure</option>
                                <option value="90">1h30</option>
                                <option value="120">2 heures</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="meetingLanguage">Langue</label>
                            <select id="meetingLanguage" class="input-field">
                                <option value="fr" selected>Français</option>
                                <option value="en">English</option>
                                <option value="es">Español</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="toggle-label">
                            <input type="checkbox" id="requirePassword">
                            <span class="toggle-slider"></span>
                            Protéger par mot de passe
                        </label>
                    </div>
                    
                    <div class="password-section" id="passwordSection" style="display: none;">
                        <input type="password" id="meetingPassword" class="input-field" placeholder="Mot de passe de la réunion">
                    </div>
                    
                    <div class="form-group">
                        <label class="toggle-label">
                            <input type="checkbox" id="enableRecording">
                            <span class="toggle-slider"></span>
                            Activer l'enregistrement automatique
                        </label>
                    </div>
                    
                    <div class="participant-limit">
                        <label for="maxParticipants">Nombre maximum de participants</label>
                        <div class="slider-container">
                            <input type="range" id="maxParticipants" min="2" max="100" value="10" class="slider">
                            <span class="slider-value">10</span>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeModal('createMeetingModal')">
                            Annuler
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-rocket"></i>
                            Créer la réunion
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="js/meeting.js"></script>
</body>
</html>
